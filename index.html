<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="CO2NEX Carbon Credit Platform Architecture Diagram">
  <meta name="keywords" content="carbon-credit, blockchain, UNFCCC, climate-tech, mermaid.js, article-6, ERC-1155">
  <meta name="author" content="CO2NEX Team">
  <title>CO2NEX Architecture Diagram</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #f0f0f0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      color: #00e676;
    }
    .mermaid {
      background-color: #1e1e1e;
      padding: 1rem;
      border-radius: 10px;
      overflow-x: auto;
    }
  </style>
</head>
<body>

<h1>üåç CO2NEX Architecture Flow</h1>

<!-- Mermaid Diagram -->
<pre class="mermaid">
graph TD
    %% ===== LANDOWNER ONBOARDING =====
    A[üåç Landowner Submission] -->|üìÑ KYC Package + üè∑Ô∏è Land Deeds| B[üèõÔ∏è UNFCCC Host Country Portal]
    B -->|‚úÖ Article 6.5 Authorization| C[üó∫Ô∏è GeoJSON Polygon Upload]
    C --> D[üÜî Project ID Generator]
    D --> E[üíæ Master Database Entry]

    %% ===== SATELLITE VERIFICATION =====
    E --> F1[üî• NASA VIIRS Fire]
    E --> F2[üõ∞Ô∏è Sentinel-2 NDVI/NDWI]
    E --> F3[üå≥ GEDI Lidar Biomass]
    E --> F4[üí® GHGSat Methane]
    E --> F5[üåßÔ∏è NOAA Precipitation]

    %% ===== CORE CALCULATIONS =====
    F2 --> G1[üåø Above-Ground Carbon]
    F3 --> G1
    F2 --> G2[‚õèÔ∏è Below-Ground Carbon]
    F1 --> G3[üßØ Fire Risk Buffer]
    F5 --> G4[üíß Water Credits]
    F4 --> G5[‚òÅÔ∏è Methane Flux]

    G1 --> H[üìä IPCC Tier 3 Model]
    G2 --> H
    G3 --> H
    G4 --> H
    G5 --> H

    %% ===== ARTICLE 6 COMPLIANCE =====
    H --> I1[üîÑ Corresponding Adjustment Calc]
    H --> I2[üåê SDG Impact Scoring]
    I1 --> J[üé® ITMO Token Designer]
    I2 --> J

    %% ===== BLOCKCHAIN INTEGRATION =====
    J --> K[‚õìÔ∏è ERC-1155 Minting]
    K --> L[üîí Double-Counting Prevention]
    L --> M[‚ôªÔ∏è On-Chain Retirement]

    %% ===== MONITORING & REPORTING =====
    M --> N1[üìë Monthly UNFCCC Reports]
    M --> N2[üìä Real-Time Dashboard]
    N1 --> O[üåç Global Carbon Registry]
    N2 --> P[üëÅÔ∏è Public Validator Nodes]

    %% ===== RISK MITIGATION =====
    P --> Q1[üå≤ Deforestation Alerts]
    P --> Q2[üî• Fire Probability]
    P --> Q3[üèúÔ∏è Drought Warning]
    Q1 --> R[üõ°Ô∏è Buffer Pool Adjustment]
    Q2 --> R
    Q3 --> R

    %% ==== NEW CRITICAL NODES ====
    E -->|Pre-Verification| X[üïµÔ∏è‚Äç‚ôÄÔ∏è Third-Party Audit Queue]
    H --> Y[‚öñÔ∏è Carbon/Water Credit Ratio]
    R --> Z[üö® Automatic Insurance Payouts]

    %% ===== OPTIONAL EXTENSIONS =====
    M -->|üí∞| T[üí∏ Tokenized Asset Ledger]
    T --> U[üìà Price Discovery Engine]
    U --> V[ü§ù OTC Marketplace]

    A -->|üë• Traditional Land Map| W[Indigenous Consent Verification]
    W --> B

    H -->|üß™| X1[Soil Core Validation]
    H -->|üå°Ô∏è| X2[Flux Tower Data]

    %% ===== LEGEND COLORS =====
    style A fill:#4CAF50,stroke:#388E3C
    style B fill:#2196F3,stroke:#0D47A1
    style K fill:#9C27B0,stroke:#6A1B9A
    style O fill:#FF9800,stroke:#E65100
    style X fill:#607D8B,stroke:#455A64
    style Y fill:#00BCD4,stroke:#00838F
    style Z fill:#F44336,stroke:#C62828
</pre>

<!-- Mermaid.js Script -->
<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, theme: "dark" });
</script>

</body>
</html>
